<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">


<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet" href="layout/styles/layoutlog.css" />
<link rel="stylesheet" href="layout/styles/indexLayout.css" />
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400&display=swap" rel="stylesheet">
<link rel="stylesheet" type="text/css" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}"/>


<body>

<!-- topbar -->
<div>
    <div>
          <div class="justify-content-between fixed-top d-flex">
          <div style="width: 10000px; height: 60px; background-color: #212529; filter: drop-shadow(0px 17px 11px grey);"><h2 style="margin-left: 120px; margin-top: 10px; color: white"><b>UCP Centro di Formazione UdSdR</b></h2></div>
          <div style="position: absolute;"><a th:href="@{/index}" style="text-decoration: none; color:white; margin-top: 20px;" ><img src="/images/logo.png" width="100px" height="100px" style="margin-top: 2px; margin-left: 5px;filter: drop-shadow(6px 3px 5px black);"></a></div>
          </div>
    </div>
</div>

<div class="d-md-flex half">
	<div class="contents" style="height: 1200px">
		<div class="container">
			<div class="row align-items-center justify-content-center">
				<div class="col-md-12" style="height: 809px">
					<div class="form-block mx-auto">
						<div class="text-center mb-5">
							<h3>REGISTRATI</h3>
						</div>
						<span id="span_id" style="display: none;" th:text="${lastUserId}"></span>
						<form th:action="@{/register}" method="POST" name="form">
							<div class="form-group first">
								<label for="firstname">NOME</label>
								<input type="text" class="form-control" name="firstname" placeholder="nome" id="firstname" required th:field="${user.nome}">
								<h6 th:if="${#fields.hasErrors('user.nome')}" th:errors="${user.nome}" th:style="'color:#b90000'"></h6>
							</div>						
							<div class="form-group first">
								<label for="lastname">COGNOME</label>
								<input type="text" class="form-control" name="lastname" placeholder="cognome" id="lastname" required th:field="${user.cognome}" onblur="
									if(document.form.firstname.value!='' && document.form.lastname.value!='') {
     									var username = document.form.firstname.value.substr(0,49) + '.' +     document.form.lastname.value.substr(0,49);
     									username = username.replace(/\s+/g, '');
    					 				username = username.replace(/\'+/g, '');
    	 								username = username.replace(/-+/g, '');
     									username = username.toUpperCase();
     									document.form.username.value = username + document.getElementById('span_id').innerHTML;
									}" />
								<h6 th:if="${#fields.hasErrors('user.cognome')}" th:errors="${user.cognome}" th:style="'color:#b90000'"></h6>
							</div>						
							<div class="form-group first">
								<label for="date">DATA DI NASCITA</label>
								<input type="date" class="form-control" placeholder="data di nascita" id="birthdate" required th:field="${user.dataDiNascita}">
								<h6 th:if="${#fields.hasErrors('user.dataDiNascita')}" th:errors="${user.dataDiNascita}" th:style="'color:#b90000'"></h6>
							</div>
							<div class="form-group first">
								<label for="username">USERNAME</label>
								<input readonly type="text" class="form-control" name="username" placeholder="nome utente" id="username" required th:field="${credentials.username}">
								<h6 th:if="${#fields.hasErrors('credentials.username')}" th:errors="${credentials.username}" th:style="'color:#b90000'"></h6>
							</div>
							<div class="form-group last mb-3">
								<label for="password">PASSWORD</label>
								<input type="password" class="form-control" placeholder="crea password" id="password" required th:field="${credentials.password}">
								<h6 th:if="${#fields.hasErrors('credentials.password')}" th:errors="${credentials.password}" th:style="'color:#b90000'"></h6>
							</div>
							<div class="form-group last mb-3">
								<label for="password">CONFERMA PASSWORD</label>
								<input type="password" class="form-control" placeholder="ripeti password" id="passwordConfirm" required th:field="${credentials.passwordConfirm}">
								<h6 th:if="${#fields.hasErrors('credentials.passwordConfirm')}" th:errors="${credentials.password}" th:style="'color:#b90000'"></h6>
							</div>
							<span class="text-center my-5 d-block"></span>
							<input type="submit" value="Conferma registrazione" class="btn btn-block py-2 btn-primary">
							<span class="text-center my-1 d-block" style="font-size: 80%">oppure</span>
							<span class="text-center my-1 d-block">
									<a th:href="@{/login}">Torna alla pagina di Login</a>
							</span>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
</body>
</html>